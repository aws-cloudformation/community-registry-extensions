Parameters:
  EnvType:
    Description: Environment type.
    Default: alpha
    Type: String
    AllowedValues:
      - alpha
      - beta
      - gamma
      - prod
    ConstraintDescription: Specify alpha, beta, gamma, or prod
Conditions:
  IsNotProd: !Not
    - !Equals
      - !Ref EnvType
      - prod
Resources:
  Table:
    DeletionPolicy: Delete
    UpdateReplacePolicy: Delete
    Type: AWS::DynamoDB::Table
    Properties:
      KeySchema:
        [
          { AttributeName: "pk", KeyType: HASH },
          { AttributeName: "sk", KeyType: HASH },
        ]
      AttributeDefinitions:
        [
          { AttributeName: "pk", AttributeType: "S" },
          { AttributeName: "sk", AttributeType: "S" },
        ]
  Item:
    Condition: IsNotProd
    Type: AwsCommunity::DynamoDB::Item
    Properties:
      TableName: !Ref Table
      Item:
        title:
          S: title
      Key:
        pk:
          S: pk
        sk:
          S: sk
